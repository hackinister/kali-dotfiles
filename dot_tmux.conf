set -g default-terminal "tmux-256color"

set -as terminal-overrides ",*:Tc" 

# Extended keys support (useful for NeoVim)
set-option -g extended-keys on
set-option -as terminal-features ',*:extkeys'
set-option -g mode-keys vi

# Undercurl/underline support (for LSP diagnostics in Neovim)
set-option -as terminal-overrides ',*:Smulx=\E[4::%p1%dm'
set-option -as terminal-overrides ',*:Setulc=\E[58::2::%p1%{65536}%/%d::%p1%{256}%/%{255}%&%d::%p1%{255}%&%d%;m'
# Mouse Mode
set -g mouse on

# Lengthen the amount of time status messages are displayed
set-option -g display-time 3000 # Messages display for 3 seconds
set-option -g display-panes-time 3000

# Set the base-index to 1 rather than 0
set -g base-index 1
set-option -g renumber-windows on # renumber windows when one is closed

# Focus and events
set-option -g focus-events on       # Required for autoread in Vim/Neovim

# Allow the arrow key to be used immediately after changing windows.
set-option -g repeat-time 0

# Faster command squences
set-option -sg escape-time 0

# Increase history-limit to be able to scroll back more then 2000 Lines
set-option -g history-limit 50000

# Window titles
set-option -g set-titles on

# Word separators (improves double-click text selection)
set-option -g word-separators ' -_@./\()[]{}:;,<>'

# Status Bar
set -g status-interval 10 	# redraw status line every 10 seconds

# =============================================================================
#  2. WINDOW OPTIONS
# =============================================================================
# Change background color of a tab when activity occurs
setw -g monitor-activity on
set-option -g visual-activity off
set-option -g activity-action other
set-option -g silence-action other
set-option -g monitor-silence 0

# Window behavior
set-window-option -g automatic-rename on
set-window-option -g pane-base-index 1

# Mouse (window-level)
set-window-option -g mouse on

# =============================================================================
#  3. KEY BINDINGS
# =============================================================================

# aliasr 
bind u split-window "aliasr send -pp" # open aliasr below the current pane and send commands ohne enter
bind K split-window "aliasr -e send -pp" # as above with executing command directly

# use Control j oder f als Prefix
# -g for global
unbind-key C-b
set-option -g prefix C-j
set-option -g prefix2 C-f
unbind-key C-j
bind-key C-j send-prefix

# Close Pane Keybinding
bind W kill-pane

# Toggle Sychronize panes
bind L set-window-option synchronize-panes

# Use Alt-arrow keys without prefix key to switch panes
bind -n M-Left select-pane -L
bind -n M-Right select-pane -R
bind -n M-Up select-pane -U
bind -n M-Down select-pane -D

# copy mode Keybinding
bind C copy-mode

# Rename windows
unbind ,
unbind r
bind r command-prompt { rename-window -- '%%' }

# Shift arrow to switch windows
bind -n S-Left previous-window
bind -n S-Right next-window

# Set window split keys
bind-key v split-window -h
bind-key h split-window -v

bind Space last-window              # prefix + Space: last window
# =============================================================================
#  4. PLUGINS (TPM)
# =============================================================================

# List of plugins
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'tmux-plugins/tmux-continuum'
set -g @plugin 'tmux-plugins/tmux-open'
set -g @plugin 'tmux-plugins/tmux-logging'
set -g @plugin 'tmux-plugins/tmux-yank'
set -g @plugin 'sainnhe/tmux-fzf'
set -g @plugin 'laktak/extrakto'

# Mouse enhancements
set -g @plugin 'nhdaly/tmux-better-mouse-mode'
set -g @plugin 'azorng/tmux-smooth-scroll'

# Plugin Config
set -g @logging-path "/home/kali/Desktop/logs"
set -g @yank_action 'copy-pipe' # or 'copy-pipe-and-cancel' for the default
set -g @continuum-save-interval '60'
set -g @continuum-restore 'on'
set -g @plugin 'fabioluciano/tmux-powerkit'

# -----------------------------------------------------------------------------
#  Better Mouse Mode Settings
# -----------------------------------------------------------------------------
set -g @scroll-without-changing-pane 'on'
set -g @scroll-in-moused-over-pane 'on'
set -g @emulate-scroll-for-no-mouse-alternate-buffer 'on'
set -g @scroll-speed-num-lines-per-scroll '3'

# =============================================================================
#  5. POWERKIT CONFIGURATION
# =============================================================================

# Choose theme and variant
set -g @powerkit_theme 'tokyo-night'
set -g @powerkit_theme_variant 'night'
set -g @powerkit_transparent "true"

# -----------------------------------------------------------------------------
#  Plugins Selection
# -----------------------------------------------------------------------------
# Groups:
#   Blue:   System     - cpu, memory, disk, gpu, temperature, fan, iops
#   Purple: Network    - netspeed, wifi, vpn, ssh
#   Green:  VCS        - git, github, bitbucket
#   Yellow: DevOps     - jira, kubernetes, terraform
#   Red:    Media      - audiodevices, nowplaying, bluetooth
#   None:   Standalone - weather, camera, microphone, battery, bitwarden, etc.

set -g @powerkit_plugins "\
group(cpu,memory,disk),\
group(vpn),\
group(packages)"

# -----------------------------------------------------------------------------
#  Show Only on Threshold (hide plugins when values are normal)
# -----------------------------------------------------------------------------

set -g @powerkit_plugin_cpu_show_only_on_threshold "true"
set -g @powerkit_plugin_memory_show_only_on_threshold "true"
set -g @powerkit_plugin_disk_show_only_on_threshold "true"

# Layout & Appearance
set -g @powerkit_status_order "session,plugins,windows"
set -g @powerkit_elements_spacing "false"
set -g @powerkit_window_index_style "box"
set -g @powerkit_window_index_icons "true"
set -g @powerkit_edge_separator_style "rounded:all"

# -----------------------------------------------------------------------------
#  Pane Flash Effect
# -----------------------------------------------------------------------------
set -g @powerkit_pane_flash_enabled "true"
set -g @powerkit_pane_flash_duration "100"

# Auto-detect OS icon
set -g @powerkit_session_icon 'auto'

set -g @powerkit_theme_selector_key 'C-t'
set -g @powerkit_show_keybindings_key "C-?"
set -g @powerkit_reload_config_key "R"

# Initialize TMUX plugin manager (keep this line at the very bottom of tmux.conf)
run '~/.tmux/plugins/tpm/tpm'



